webpackJsonp([8],{F8at:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Au9i"),i=n(s("6FWs")),o=n(s("KgXo"));function n(e){return e&&e.__esModule?e:{default:e}}var r=s("xrTZ").Base64;t.default={components:{load:o.default},data:function(){return{clickItem:"",file:[],textarea:{text:""},fromId:"",fromName:"",toId:"",toName:"",type:"",token:"",language:"",conterNum:0,imgBase64:[],isshow:!0,loadShow:!1}},created:function(){this.token=decodeURIComponent(this.$route.query.token),this.language=this.$route.query.language,this.clickItem=this.$route.query.clickItem,console.log(this.$route.query.clickItem),this.fromId=parseInt(r.decode(decodeURIComponent(this.$route.query.fromId))),this.fromName=r.decode(decodeURIComponent(this.$route.query.fromName)),this.toId=r.decode(decodeURIComponent(this.$route.query.toId)),this.toName=r.decode(decodeURIComponent(this.$route.query.toName)),this.type=this.$route.query.type,"zh-TW"==this.language?this.$i18n.locale="tw":"en"==this.language?this.$i18n.locale="en":"kor"==this.language?this.$i18n.locale="kor":"zh-CN"==this.language&&(this.$i18n.locale="zh"),i.default.set(this.$route.query.clickItem)},methods:{getImgBase:function(){var e=this,t=t||window.event,s=t.target.files[0];this.file=s;var a=new FileReader;a.onload=function(t){e.imgBase64.push(t.target.result),document.getElementById("img").value=""},a.readAsDataURL(s),"2"==e.imgBase64.length&&(this.isshow=!1)},delImg:function(e){console.log(e),this.isshow=!0,this.imgBase64.splice(e,1)},submit:function(){var e=this;this.loadShow=!0;var t=this.$util.FILESAVE,s=encodeURI(this.textarea.text);console.log(s);var i=new FormData;i.append("file",this.file),i.append("fromId",this.fromId),i.append("fromName",this.fromName),i.append("toId",this.toId),i.append("toName",this.toName),i.append("type",this.type),i.append("content",this.clickItem),i.append("describe",s),console.log(i),this.$http.post(t,i,{headers:{"HB-IM-TOKEN":this.token}}).then(function(t){if(e.loadShow=!1,console.log(t),1==t.data.success){var s=(0,a.Toast)({message:e.$t("message.Reports"),iconClass:"mint-toast-icon mintui mintui-field-success",className:"centerToast"});setTimeout(function(){s.close();var e=navigator.userAgent.toLowerCase();e.indexOf("Android")>-1||e.indexOf("Adr"),e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?window.webkit.messageHandlers.canCelInAppliCation.postMessage(null):/(Android)/i.test(navigator.userAgent)&&window.WebViewJavascriptBridge.callHandler("canCelInAppliCation","关闭页面",null)},2e3)}else if("HCT99995"==t.data.code){e.loadShow=!1;var i=(0,a.Toast)({message:e.$t("message.textNo"),iconClass:"mint-toast-icon mintui mintui-field-error",className:"centerToast"});setTimeout(function(){i.close()},2e3)}else if("HCT50010"==t.data.code){e.loadShow=!1;var o=(0,a.Toast)({message:e.$t("message.reportLimit"),iconClass:"mint-toast-icon mintui mintui-field-error",className:"centerToast"});setTimeout(function(){o.close()},2e3)}else{e.loadShow=!1;var n=(0,a.Toast)({message:e.$t("message.ReportNo"),iconClass:"mint-toast-icon mintui mintui-field-error",className:"centerToast"});setTimeout(function(){n.close()},2e3)}}).catch(function(t){e.loadShow=!1;var s=(0,a.Toast)({message:e.$t("message.ReportNo"),iconClass:"mint-toast-icon mintui mintui-field-error",className:"centerToast"});setTimeout(function(){s.close()},2e3)})}},filters:{e:function(e){return e||"0"}},watch:{textarea:{handler:function(){this.$refs.count.setAttribute("maxlength",200),this.conterNum=this.$refs.count.value.length},deep:!0}}}},"H+L4":function(e,t){},"cI+C":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("F8at"),i=s.n(a);for(var o in a)"default"!==o&&function(e){s.d(t,e,function(){return a[e]})}(o);var n=s("p/8R");var r=function(e){s("H+L4")},c=s("VU/8")(i.a,n.a,!1,r,null,null);t.default=c.exports},"p/8R":function(e,t,s){"use strict";var a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reportinfo"},[s("div",{staticClass:"report_info"},[s("div",{staticClass:"info_head"},[s("span",{staticClass:"head_p"},[e._v(e._s(e.$t("message.Photo")))]),e._v(" "),s("span",{staticClass:"head_number"},[e._v(e._s(e._f("e")(e.imgBase64.length))+e._s(e.$t("message.sheets")))])]),e._v(" "),s("div",{staticClass:"upload_box"},[s("div",{staticClass:"head_upload"},[s("div",{staticClass:"view"},e._l(e.imgBase64,function(t,a){return s("div",{staticClass:"item"},[s("span",{staticClass:"cancel-btn",on:{click:function(t){e.delImg(a)}}}),e._v(" "),s("img",{attrs:{src:t}})])})),e._v(" "),e.isshow?s("div",{staticClass:"addbox"},[s("input",{attrs:{type:"file",id:"img",accept:"image/*",multiple:""},on:{change:function(t){e.getImgBase()}}}),e._v(" "),s("div",{staticClass:"addbtn"})]):e._e()])]),e._v(" "),s("div",{staticClass:"txt_div"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textarea.text,expression:"textarea.text"}],ref:"count",staticClass:"texta",attrs:{name:"",placeholder:e.$t("message.content"),id:"contents"},domProps:{value:e.textarea.text},on:{input:function(t){t.target.composing||e.$set(e.textarea,"text",t.target.value)}}})]),e._v(" "),s("p",{attrs:{id:"ts"}},[e._v(e._s(e.conterNum)+"/200")]),e._v(" "),s("button",{staticClass:"submit",on:{click:function(t){e.submit()}}},[e._v(e._s(e.$t("message.report")))])]),e._v(" "),e.loadShow?s("load"):e._e()],1)},staticRenderFns:[]};t.a=a}});